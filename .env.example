# ==============================================
# IAU Portal - Environment Variables Example
# ==============================================
# Copy this file to .env in the project root before running docker-compose.
# docker-compose.yml reads these variables automatically.
#
# MINIMUM REQUIRED for production:
#   - SECRET_KEY (generate with: python -c "import secrets; print(secrets.token_urlsafe(32))")
#   - POSTGRES_PASSWORD (use a strong unique password)
#   - ALLOWED_ORIGINS (set to your production domain)
#   - ENVIRONMENT=production

# --- Docker Configuration ---
# Host binding (0.0.0.0 for all interfaces, 127.0.0.1 for localhost only)
HOST=0.0.0.0

# Frontend external port (default: 3000)
FRONTEND_PORT=3000

# Data volume paths - IMPORTANT for Portainer deployments!
# These map your host directories to container paths.
# Your existing data in /appdata/iau-portal/ will be preserved.
#
# Linux/Portainer example:
DATA_PATH=/appdata/iau-portal/data
TEMPLATES_PATH=/appdata/iau-portal/templates
#
# Windows example:
# DATA_PATH=C:/appdata/iau-portal/data
# TEMPLATES_PATH=C:/appdata/iau-portal/templates

# --- API Configuration ---
# API Backend URL (Frontend uses this to connect to backend)
# Local development: Leave empty (auto-detects localhost:8000)
# Production: Set to your backend URL
VITE_API_URL=

# Production Examples:
# VITE_API_URL=https://iau-portal-backend.onrender.com
# VITE_API_URL=https://api.portal.iau.edu.sa
# VITE_API_URL=https://your-railway-app.railway.app

# --- SMTP Email Configuration ---
# Required for: leave request notifications, contract alerts, approval emails
# Set SMTP_ENABLED=true to send real emails, false for mock mode (logs only)

# Option 1: Gmail (Recommended for testing)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-16-char-app-password
SMTP_SENDER_EMAIL=noreply@iau-portal.com
SMTP_ENABLED=false

# Option 2: Mailtrap (Best for development/testing)
# SMTP_HOST=sandbox.smtp.mailtrap.io
# SMTP_PORT=587
# SMTP_USERNAME=your-mailtrap-username
# SMTP_PASSWORD=your-mailtrap-password
# SMTP_SENDER_EMAIL=noreply@iau-portal.com
# SMTP_ENABLED=true

# Option 3: Office365/Outlook (Production)
# SMTP_HOST=smtp.office365.com
# SMTP_PORT=587
# SMTP_USERNAME=your-email@outlook.com
# SMTP_PASSWORD=your-password
# SMTP_SENDER_EMAIL=noreply@iau.edu.sa
# SMTP_ENABLED=true

# Option 4: Custom SMTP Server (Production)
# SMTP_HOST=smtp.iau.edu.sa
# SMTP_PORT=587
# SMTP_USERNAME=smtp-user@iau.edu.sa
# SMTP_PASSWORD=your-smtp-password
# SMTP_SENDER_EMAIL=noreply@iau.edu.sa
# SMTP_ENABLED=true

# --- Gmail App Password Setup ---
# 1. Enable 2-Step Verification: https://myaccount.google.com/security
# 2. Generate App Password: https://myaccount.google.com/apppasswords
# 3. Select "Mail" as app type
# 4. Copy the 16-character password
# 5. Use it as SMTP_PASSWORD (no spaces)

# --- PostgreSQL Database Configuration ---
# Database connection settings
POSTGRES_DB=iau_portal
POSTGRES_USER=your_database_username
POSTGRES_PASSWORD=CHANGE_THIS_TO_SECURE_PASSWORD
POSTGRES_PORT=5432

# Database URL for backend (automatically constructed from above)
# Docker: use 'postgres' as hostname
# Local: use 'localhost' as hostname
DATABASE_URL=postgresql://your_database_username:CHANGE_THIS_TO_SECURE_PASSWORD@postgres:5432/iau_portal

# For local development (outside Docker):
# DATABASE_URL=postgresql://your_database_username:CHANGE_THIS_TO_SECURE_PASSWORD@localhost:5432/iau_portal

# --- Security Configuration (CRITICAL!) ---
# JWT Secret Key - Used for token signing/verification
# IMPORTANT: Generate a strong random key before deployment!
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=CHANGE-THIS-TO-RANDOM-32-PLUS-CHARACTER-STRING

# JWT Token Expiration (in minutes)
ACCESS_TOKEN_EXPIRE_MINUTES=30

# CORS Allowed Origins (comma-separated list of allowed frontend URLs)
# Development: localhost addresses for React dev server
# Production: Replace with your actual domain(s)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:8098,http://127.0.0.1:3000

# Production example:
# ALLOWED_ORIGINS=https://portal.iau.edu.sa,https://iau.edu.sa

# Environment Mode (development or production)
# Set to 'production' for production deployment (enforces SECRET_KEY validation)
ENVIRONMENT=development

# --- Portainer Deployment Notes ---
#
# IMPORTANT: Portainer Git deployments must BUILD images (not pull)!
#
# Steps for Portainer Stack deployment:
# 1. Create stack from Git repository
# 2. Under "Build" section: Enable "Force pull image" OFF
# 3. Under "Build" section: Enable "Force build" ON (or click "Build the stack")
# 4. Add environment variables below (or load from .env file)
# 5. Deploy the stack
#
# Environment variables to set in Portainer:
# - SECRET_KEY (generate with: python -c "import secrets; print(secrets.token_urlsafe(32))")
# - POSTGRES_PASSWORD (use a strong unique password)
# - DATA_PATH=/appdata/iau-portal/data
# - TEMPLATES_PATH=/appdata/iau-portal/templates
# - ALLOWED_ORIGINS=http://your-server-ip:3000
# - ENVIRONMENT=production
#
# To force rebuild after code changes:
# - Click "Pull and Redeploy" with "Re-pull image and redeploy" disabled
# - Enable "Force rebuild" option
#
# Never commit .env with real credentials to git!
