# ==============================================
# IAU Portal - Environment Variables Example
# ==============================================
# Copy this file to .env for local development
# Or set these in your deployment platform (Portainer, Render, etc.)

# --- Docker Configuration ---
# Host binding (0.0.0.0 for all interfaces, 127.0.0.1 for localhost only)
HOST=0.0.0.0

# Frontend external port (default: 3000)
FRONTEND_PORT=3000

# Docker image versioning (for Portainer deployments)
# Use semantic versioning: v1.0.0, v1.0.1, etc.
IMAGE_TAG=latest

# Cache buster - increment to force rebuild in Portainer (1, 2, 3, etc.)
# IMPORTANT: Change this value in Portainer to force image rebuild without deleting stack
CACHEBUST=1

# --- API Configuration ---
# API Backend URL (Frontend uses this to connect to backend)
# Local development: Leave empty (auto-detects localhost:8000)
# Production: Set to your backend URL
VITE_API_URL=

# Production Examples:
# VITE_API_URL=https://iau-portal-backend.onrender.com
# VITE_API_URL=https://api.portal.iau.edu.sa
# VITE_API_URL=https://your-railway-app.railway.app

# --- SMTP Email Configuration ---
# Required for: leave request notifications, contract alerts, approval emails
# Set SMTP_ENABLED=true to send real emails, false for mock mode (logs only)

# Option 1: Gmail (Recommended for testing)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-16-char-app-password
SMTP_SENDER_EMAIL=noreply@iau-portal.com
SMTP_ENABLED=false

# Option 2: Mailtrap (Best for development/testing)
# SMTP_HOST=sandbox.smtp.mailtrap.io
# SMTP_PORT=587
# SMTP_USERNAME=your-mailtrap-username
# SMTP_PASSWORD=your-mailtrap-password
# SMTP_SENDER_EMAIL=noreply@iau-portal.com
# SMTP_ENABLED=true

# Option 3: Office365/Outlook (Production)
# SMTP_HOST=smtp.office365.com
# SMTP_PORT=587
# SMTP_USERNAME=your-email@outlook.com
# SMTP_PASSWORD=your-password
# SMTP_SENDER_EMAIL=noreply@iau.edu.sa
# SMTP_ENABLED=true

# Option 4: Custom SMTP Server (Production)
# SMTP_HOST=smtp.iau.edu.sa
# SMTP_PORT=587
# SMTP_USERNAME=smtp-user@iau.edu.sa
# SMTP_PASSWORD=your-smtp-password
# SMTP_SENDER_EMAIL=noreply@iau.edu.sa
# SMTP_ENABLED=true

# --- Gmail App Password Setup ---
# 1. Enable 2-Step Verification: https://myaccount.google.com/security
# 2. Generate App Password: https://myaccount.google.com/apppasswords
# 3. Select "Mail" as app type
# 4. Copy the 16-character password
# 5. Use it as SMTP_PASSWORD (no spaces)

# --- PostgreSQL Database Configuration ---
# Database connection settings
POSTGRES_DB=iau_portal
POSTGRES_USER=your_database_username
POSTGRES_PASSWORD=CHANGE_THIS_TO_SECURE_PASSWORD
POSTGRES_PORT=5432

# Database URL for backend (automatically constructed from above)
# Docker: use 'postgres' as hostname
# Local: use 'localhost' as hostname
DATABASE_URL=postgresql://your_database_username:CHANGE_THIS_TO_SECURE_PASSWORD@postgres:5432/iau_portal

# For local development (outside Docker):
# DATABASE_URL=postgresql://your_database_username:CHANGE_THIS_TO_SECURE_PASSWORD@localhost:5432/iau_portal

# --- Security Configuration (CRITICAL!) ---
# JWT Secret Key - Used for token signing/verification
# IMPORTANT: Generate a strong random key before deployment!
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=CHANGE-THIS-TO-RANDOM-32-PLUS-CHARACTER-STRING

# JWT Token Expiration (in minutes)
ACCESS_TOKEN_EXPIRE_MINUTES=30

# CORS Allowed Origins (comma-separated list of allowed frontend URLs)
# Development: localhost addresses for React dev server
# Production: Replace with your actual domain(s)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:8098,http://127.0.0.1:3000

# Production example:
# ALLOWED_ORIGINS=https://portal.iau.edu.sa,https://iau.edu.sa

# Environment Mode (development or production)
# Set to 'production' for production deployment (enforces SECRET_KEY validation)
ENVIRONMENT=development

# --- Portainer Deployment Notes ---
# 1. Copy these variables to Portainer Stack environment section
# 2. Never commit .env with real credentials to git
# 3. To force rebuild: increment CACHEBUST (1→2→3...)
# 4. To version: update IMAGE_TAG (v1.0.0→v1.0.1)
# 5. Generate new SECRET_KEY for each environment
# 6. Use strong, unique passwords for POSTGRES_PASSWORD
